---
layout: default
---

<div class="post">
  <h1 class="post-title">{{ page.title }}</h1>
  <span class="post-date">{{ page.date | date_to_string }} &middot; {{ page.author }}</span>
  {{ content | smartify }}
  <div class="page-tags">
    <span>Tags: </span>
    {% for tag in page.tags %}
    <small>
      <a href="/tag/{{ tag }}">{{ tag }}</a>
    </small>
    {% endfor %}
  </div>
</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    {% assign posted = '' %}
    {% for post in site.posts %}
      {% for tag in page.tags %}
        {% if post.tags contains tag and post != page %}
          {% capture post_string %}{{ post.url }}|{{ post.title }}|{{ post.date }}{% endcapture %}
          {% unless posted contains post_string %}
            {% capture posted %}{{ posted }}^{{ post_string }}{% endcapture %}
          {% endunless %}
        {% endif %}
      {% endfor %}
    {% endfor %}
    {% assign posts = posted | split: "^" %}
    {% for post in posts offset: 1 limit: 3 %}
      {% assign p_info = post | split: "|" %}
      <li>
        <h3>
          <a href="{{ p_info[0] }}">
            {{ p_info[1] }}
            <small>{{ p_info[2] | date_to_string }}</small>
          </a>
        </h3>
      </li>
    {% endfor %}
  </ul>
</div>
